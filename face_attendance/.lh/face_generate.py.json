{
    "sourceFile": "face_generate.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1686798201912,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1686798271361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -71,9 +71,9 @@\n             count += 1\r\n \r\n         cv2.imshow(\"Capture Images\", frame)\r\n         if cv2.waitKey(1) & 0xFF == ord('q'):\r\n-            # Hapus folder yang telah dibuat jika tombol 'q' ditekan sebelum folder_created menjadi \r\n+            # Hapus folder yang telah dibuat jika tombol 'q' ditekan sebelum folder_created menjadi True\r\n             global folder_created\r\n             if not folder_created:\r\n                 os.rmdir(folder_path)\r\n             label_status.config(text=\"Folder tidak jadi dibuat.\")\r\n"
                }
            ],
            "date": 1686798201911,
            "name": "Commit-0",
            "content": "import tkinter as tk\r\nimport os\r\nimport cv2\r\nimport imutils\r\nimport dlib\r\n\r\n# Inisialisasi detector wajah\r\ndetector = dlib.get_frontal_face_detector()\r\n\r\n# Inisialisasi jendela Tkinter\r\nwindow = tk.Tk()\r\nwindow.title('Augmentation and Preprocessing Page')\r\nwindow.geometry('500x100')\r\n\r\n# Variabel status folder\r\nfolder_created = False\r\n\r\n# Fungsi untuk membuat folder dan menjalankan skrip augmentasi dan preprocessing\r\ndef create_folder_and_run_script():\r\n    folder_name = entry.get()\r\n    if folder_name:\r\n        folder_path = \"dataset/\" + folder_name\r\n        if not os.path.exists(folder_path):\r\n            os.makedirs(folder_path)\r\n            # Jalankan skrip mengambil gambar di sini\r\n            capture_images(folder_path)\r\n            resize_images(folder_path)  # Resize gambar\r\n            label_status.config(text=\"Folder '{}' berhasil dibuat dan gambar diambil.\".format(folder_name))\r\n            # Set folder_created ke True\r\n            global folder_created\r\n            folder_created = True\r\n        else:\r\n            label_status.config(text=\"Folder '{}' sudah ada.\".format(folder_name))\r\n    else:\r\n        label_status.config(text=\"Masukkan nama folder.\")\r\n\r\n# Fungsi untuk mengambil gambar dari webcam\r\ndef capture_images(folder_path):\r\n    camera = cv2.VideoCapture(0)\r\n    count = 0\r\n    gray_count = 0\r\n\r\n    while count < 50:  # Ambil 50 gambar\r\n        _, frame = camera.read()\r\n        frame = imutils.resize(frame, width=500)\r\n\r\n        # Ubah frame menjadi grayscale\r\n        gray_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)\r\n\r\n        rects = detector(gray_frame, 0)  # Deteksi wajah\r\n\r\n        if len(rects) > 0:\r\n            rect = rects[0]\r\n            (x, y, w, h) = (rect.left(), rect.top(), rect.width(), rect.height())\r\n\r\n            # Tampilkan kotak pada wajah yang terdeteksi\r\n            cv2.rectangle(frame, (x, y), (x + w, y + h), (0, 255, 0), 2)\r\n\r\n            if gray_count < 25:\r\n                # Ambil wajah dalam bentuk grayscale\r\n                face = gray_frame[y:y + h, x:x + w]\r\n                gray_count += 1\r\n            else:\r\n                # Ambil wajah dari frame asli (berwarna)\r\n                face = frame[y:y + h, x:x + w]\r\n\r\n            # Simpan gambar wajah\r\n            image_path = os.path.join(folder_path, f\"{count}.jpg\")\r\n            cv2.imwrite(image_path, face)\r\n\r\n            count += 1\r\n\r\n        cv2.imshow(\"Capture Images\", frame)\r\n        if cv2.waitKey(1) & 0xFF == ord('q'):\r\n            # Hapus folder yang telah dibuat jika tombol 'q' ditekan sebelum folder_created menjadi \r\n            global folder_created\r\n            if not folder_created:\r\n                os.rmdir(folder_path)\r\n            label_status.config(text=\"Folder tidak jadi dibuat.\")\r\n            break\r\n\r\n    camera.release()\r\n    cv2.destroyAllWindows()\r\n\r\n# Fungsi untuk meresize gambar menjadi 108x108\r\ndef resize_images(folder_path):\r\n    for filename in os.listdir(folder_path):\r\n        if filename.endswith(\".jpg\"):\r\n            image_path = os.path.join(folder_path, filename)\r\n            image = cv2.imread(image_path)\r\n            resized_image = cv2.resize(image, (108, 108))\r\n            cv2.imwrite(image_path, resized_image)\r\n\r\n# Label dan input untuk nama folder\r\nlabel_folder = tk.Label(window, text=\"Masukkan nama folder:\")\r\nlabel_folder.grid(row=1, column=0, padx=5, pady=5)\r\n\r\nentry = tk.Entry(window)\r\nentry.grid(row=1, column=1, padx=5, pady=5)\r\n\r\n# Tombol submit\r\nbutton_submit = tk.Button(window, text=\"Submit\", command=create_folder_and_run_script)\r\nbutton_submit.grid(row=1, column=3, padx=5, pady=5)\r\n\r\n# Label status\r\nlabel_status = tk.Label(window, text=\"\")\r\nlabel_status.grid(row=2, column=1, columnspan=2, padx=5, pady=5)\r\n\r\n# Jalankan aplikasi\r\nwindow.mainloop()\r\n"
        }
    ]
}